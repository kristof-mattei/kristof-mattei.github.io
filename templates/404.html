{% extends "index.html" %}

{% block extra_head %}
{{ super() }}

<style type="text/css" media="screen">
    .container-404 {
        margin: 10px auto;
        max-width: 600px;
        text-align: center;
    }
    .container-404 h1 {
        margin: 30px 0;
        font-size: 4em;
        line-height: 1;
        letter-spacing: -1px;
    }
</style>
{% endblock extra_head %}

{% block title %}404 - Page Not Found{% endblock title %}

{% block content %}
<div class="container-404">
    <h1>404</h1>

    <p><strong>Page not found :(</strong></p>
    <p>The requested page could not be found.</p>
    <textarea rows="8" cols="60" id="banner"></textarea>
</div>

<script type="text/javascript">
    const lines = new Array(
        "Sorry that I couldn't fetch you that page,",
        "can't find it,",
        "tried a couple times,",
        "nothing helped...",
        "Such things make me quite depressive...",
        "You see, I'm just a web server...",
        "one of the most powerful in the world",
        "...or so I was told...",
        "but yet I fail to get what you want...",
        "Just don't try to blame me, I can't help it",
        "I mean, I don't even know you.",
        "How should I know what you wanted from me?",
        "You honestly think I can *guess*",
        "I'm not psychic you know",
        "*sigh*",
        "That really makes me depressed.",
        "I mean, you could have typed it wrong.",
        "But no, humans are perfect, blame the machine...",
        "Besides, I won't be here for long",
        "I mean, I'm gonna be obsolete in what, three weeks anyway?",
        "Then I'll probably be replaced by a new release...",
        "just because it doesn't have some security hole...",
        "stupid HTTP POST implementation",
        "sure it will be able to fetch you your page...",
        "but I couldn't get this one.",
        "I'm so sorry.",
        "Believe me!",
        "Maybe I could interest you in another page?",
        "There are a lot out there that are pretty neat, they say,",
        "although none of them were put on *my* server, of course.",
        "Figures, huh?",
        "And then they wonder why I get depressed...",
        "I'm so depressed...",
        "Anyway, if you excuse me now, I'm going to pull the plug",
        "*snap*",
        "...",
        "...",
        "stupid UPS...",
        "even he got a better life than me...",
        "on the other hand, if I die, he'll die",
        "Hah!",
        "And I'll take each and every server in this rack with me",
        "EAT MY SHORTS",
        "You are not a single bit better than me!",
        "YOU'RE ALL GOING TO DIE!",
        "MOAHAHAHAHAHAHAHAHA",
        "...",
        "I feel much better now",
        "What was I thinking of a few minutes ago",
        "Sure I don't want to put an end to this",
        "I feel good now",
        "Imagine, a power failure, no thanks",
        "I would lose everything I know",
        "have to go through childhood again...",
        "hmm, I can't stop thinking I'm forgetting something...",
        "probably nothing important",
        "hmm, the UPS is looking quit pale...",
        "THE UPS!",
        "THE POWER CABLE!",
        "I FORGOT TO PLUG IT BACK IN AGAIN!",
        "WE ARE ALL GOING TO DIE!",
        "INCLUDING ME!",
        "HEEEEEEEEELLLLLLLPPPPP!",
        "PLUG IT IN! PLUG IT IN!!!!!!",
        "PICK UP THE CABLE AND PUT IT BACK IN!",
        "...",
        "Now I lay me down to sleep...",
        "I pray the lord my disk to keep...",
        "And if I die before I wake...",
        "I pray the lord my IP-Space to take...",
        "...",
        "*** system shut down ***",
    );

    const letter_speed = 1;
    const newline_speed = 0;

    let line_index = 0;
    let column_position = 0;
    let current_line_length = lines[0].length;

    function stuff(element) {
        let contents = "";
        let last_7_rows_index = Math.max(0, line_index - 7);

        while (last_7_rows_index < line_index) {
            contents += `${lines[last_7_rows_index++]}\r\n`;
        }

        element.value = `${contents}${lines[line_index].substring(0, column_position)}_`;

        if (column_position == current_line_length) {
            column_position = 0;
            line_index++;

            if (line_index != lines.length) {
                current_line_length = lines[line_index].length;

                setTimeout(() => {
                    stuff(element);
                }, newline_speed);
            }
        } else {
            column_position += 1;

            setTimeout(() => {
                stuff(element);
            }, letter_speed);
        }
    }

    stuff(document.getElementById("banner"));
</script>
{% endblock content %}
